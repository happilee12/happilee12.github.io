---
title: "[AWS] Software Architect Associate - Udemyê°•ì˜ ì •ë¦¬ (2)EC2"
date: 2021-01-21 00:00:01 -0400
categories: aws aws-certificate aws-sa udemy
---
>ë³¸ í¬ìŠ¤íŠ¸ëŠ” AWS Solution Architect CERTIFICATE ì¤€ë¹„ ë° udemy ê°•ì˜ë¥¼ ì •ë¦¬í•˜ë©° ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.
**Udemy ê°•ì˜** [https://www.udemy.com/course/aws-certified-solutions-architect-associate/](https://www.udemy.com/course/aws-certified-solutions-architect-associate/)
**AWS Solution Architect Associateë€?** [https://aws.amazon.com/ko/certification/certified-solutions-architect-associate/](https://aws.amazon.com/ko/certification/certified-solutions-architect-associate/)


## ğŸ¤”  ì²˜ìŒ ë“¤ì„ ë•Œ í–‡ê°ˆë ¸ë˜ ë¶€ë¶„
* EC2 Sopt instance -
* SR-IOV(ë‹¨ì¼ ë£¨íŠ¸ ê°€ìƒí™”) -  ë§ˆì¹˜ PCI ì¥ì¹˜ê°€ ì§ì ‘ ì—°ê²°ëœê²ƒê°™ì€ íš¨ê³¼ë¥¼ ê°€ì§€ë©°, ë”°ë¼ì„œ ê°€ìƒí™”ë¡œì¸í•œ ì„±ëŠ¥ í•˜ë½ì„ ë°©ì§€
* ENI vs ENA vs EFA

# 03. EC2

## -1. EC2 101

### Pricing

1. On Demand - fixed rate by hour(or secs)
   *  Ec2ë¥¼ flexiableí•˜ê²Œ ì‚¬ìš©í•˜ê³  ì‹¶ì€ ê²½ìš°
   * applications with shor term, spiky, unpredictable workload that cannot be interrupted
   * EC2ì—ì„œ ì²˜ìŒìœ¼ë¡œ ê°œë°œ,í…ŒìŠ¤íŠ¸í•˜ëŠ” application
2. Reserved - 1 or 3ë…„ ê³„ì•½ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ ì˜ˆì•½. í• ì¸ë¥  ë§¤ìš° í¼
   * steadyí•˜ê³  prdictable usageì¸ applicationì— ì ë‹¹
   * reserved capacityê°€ í•„ìš”í•œ ê²½ìš°
   * Users able to make upfront payments to reduce their total computing costs even furter
   * Types
     * Standard Reserved instances. 75% off, ê³„ì•½ê¸°ê°„ì´ ê¸¸ìˆ˜ë¡ discout ì»¤ì§
     * Convertiable Reserved Instances. 54% off. ì¸ìŠ¤í„´ìŠ¤ íƒ€ì… ë³€ê²½ í—ˆìš©
     * Scheduled Reserved instances. Predictable recurring scheduling(day, week, month) ex. school serviceë¼ì„œ 9~6ì—ë§Œ ì‚¬ìš©ëŸ‰ì„ ëŠ˜ë¦°ë‹¤ë˜ê°€
3. Spot - .. ì£¼ì‹ì²˜ëŸ¼.. íŠ¹ì • ê°€ê²©ì— biddingí•˜ì—¬ ë¦¬ì†ŒìŠ¤ ì ìœ  â“
   * ì‹œì‘/ì¢…ë£Œì‹œê°„ì´ ìœ ë™ì ì¸ Application
   * ê°€ê²©ì´ ë§¤ìš° ì €ë ´í•´ì•¼ í•  ë•Œ
   * ê¸‰í•˜ê²Œ ëŒ€ìš©ëŸ‰ì˜ ì¶”ê°€ì ì¸ ì»´í“¨íŒ…ì´ í•„ìš”í•  ë•Œ
4. Dedicated Hosts - physical EC2 server dedicated.
   * multi-tenet virtualizationì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ” ê·œì œê°€ ìˆëŠ” ê²½ìš°
   * multi-tenancyë‚˜ cloud ë°°í¬ë¥¼ í—ˆìš©í•˜ì§€ ì•ŠëŠ” ë¼ì´ì„¼ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° (Ex. ì˜¤ë¼í´)
   * On-Demandë¡œ hourly êµ¬ë§¤ ê°€ëŠ¥
   * Reservedë¡œ ì‚¬ë©´ 70%ê¹Œì§€ í• ì¸



### Instance Types

associateë ˆë²¨ì—ëŠ” ìƒì„¸íˆ ë‚˜ì˜¤ì§€ëŠ” ì•Šìœ¼ë‹ˆ ì°¸ê³ ë§Œ
![image-20210118133630748.png](/assets/[AWSSA]EC2/image-20210118133630748.png)

ì•”ê¸°ë²•(...)

fight Dr. McPxz Au

![image-20210118134019284](/assets/[AWSSA]EC2/image-20210118134019284.png)



## -2. ì‹¤ìŠµ

### Lab - 1. ì¸ìŠ¤í„´ìŠ¤ ìƒì„±

* Launch EC2
* 1. AMI ì„ íƒ : Amazon Linux 2 AMI

![image-20210118135321358](/assets/[AWSSA]EC2/image-20210118135321358.png)

* 2. ì¸ìŠ¤í„´ìŠ¤ ì„ íƒ : t2.micro

  ![image-20210118135835479](/assets/[AWSSA]EC2/image-20210118135835479.png)

* 3. ì„¸ë¶€ ë””í…Œì¼ ì„¤ì •

  * VPC : default
  * Subnet : ì–´ë–¤ AZì‚¬ìš©í• ì§€. - Randomì„. í•œ ê³„ì •ì˜ ap-northeast-2b ê°€ ë‹¤ë¥¸ê³„ì •ì—ì„œ ë³´ì´ëŠ” ap-northeast-2bì™€ ë‹¤ë¥¸ AZì¼ ìˆ˜ ìˆìŒ â“
  * Capacity Reservation - íŠ¹ì • AZì—ì„œ ì¸ìŠ¤í„´ìŠ¤ ì˜ˆì•½
  * Shutdown behavior - stop? terminate?
  * Enable termination Protection - accitental termination ë°©ì§€ (â­ default : turnned off)
  * Cloud Watch - default : every 5 min
  * Tenancy - shared/ dedicated/ dedicated host â“

  ![image-20210118140112312](/assets/[AWSSA]EC2/image-20210118140112312.png)

* 4. ìŠ¤í† ë¦¬ì§€ ì¶”ê°€

  ![image-20210118141050180](/assets/[AWSSA]EC2/image-20210118141050180.png)

  * ë£¨íŠ¸ ìŠ¤í† ë¦¬ì§€(OSê°€ ì„¤ì¹˜ëœ ìŠ¤í† ë¦¬ì§€)ëŠ” ì„ íƒì§€ê°€ í•œì •ì 
    * Root Device Volumeë„ encrpt ê°€ëŠ¥í•¨! â­
  * Add new volumeí•˜ë©´ cold hdd ë“± ë” ë‹¤ì–‘í•œ ì˜µì…˜ì´ ìˆìŒ
  * ì¸ìŠ¤í„´ìŠ¤ ì‚­ì œ ì‹œ rootëŠ” ìë™ ì‚­ì œ, ë‹¤ë¥¸ ìŠ¤í† ë¦¬ì§€ëŠ” ìë™ ì‚­ì œ X â­

* 5. íƒœê·¸ ì¶”ê°€

  ![image-20210118141257962](/assets/[AWSSA]EC2/image-20210118141257962.png)

* Security group :  virtual firewall

  ![image-20210118141458665](/assets/[AWSSA]EC2/image-20210118141458665.png)

  ë³´ì•ˆê·¸ë£¹ ì´ë¦„ ì„¤ì •. í—ˆìš©í•˜ëŠ” ë„¤íŠ¸ì›Œí¬ ë“±ì„ ì„¤ì •.



* Create a new key pair

  public key - padlock. ì—¬ê¸°ì €ê¸° ê³µê°œí•´ë„ ê´œì°®ìŒ

  Private key - padlockì„ ì—¬ëŠ” key

  ![image-20210118141708857](/assets/[AWSSA]EC2/image-20210118141708857.png)





### Lab - 02. SSHì ‘ì†

pemí‚¤ê°€ ìˆëŠ” íŒŒì¼ë¡œ ì´ë™í•´ì„œ ê¶Œí•œ ë³€ê²½

`CHMOD 400 MyUser1KP.pem`

* CHMOD 400 : (U)ser / owner can read, can't write and can't execute. (G)roup can't read, can't write and can't execute. (O)thers can't read, can't write and can't execute.

`Ssh ec2-user@[ip] -i MyUser1KP.pem`

ë„¤íŠ¸ì›Œí¬ ìì²´ì—ì„œ 22í¬íŠ¸ë¥¼ ë§‰ëŠ” ê²½ìš°ê°€ ìˆìŒ(ê³µìš©ë„ì„œê´€.. ì‚¬ë¬´ì‹¤.. ë“±ë“±). ì§‘ì—ì„œ í•˜ë©´ ë  ê²ƒ

`sudo su` #root ê¶Œí•œìœ¼ë¡œ

`yum update -y`



### Lab - 03. ì›¹ì„œë²„ ë„ìš°ê¸°

`yum install http -y`

```sh
yum install http -y # EC2ë¥¼ ì›¹ì„œë²„ë¡œ ë§Œë“¤ì–´ì¤Œ. /var/www/htmlì•ˆì— ìˆëŠ” íŒŒì¼ì€ 80í¬íŠ¸ë¡œ ì ‘ì† ê°€ëŠ¥
cd /var/www/html
nano index.html
# <html><h1>hello world </h1></html>
service httpd start

```

í¼ë¸”ë¦­ ì£¼ì†Œë¡œ ì ‘ê·¼í•´ë³´ë©´ hello world ë³¼ ìˆ˜ ìˆìŒ

![image-20210118143404755](/assets/[AWSSA]EC2/image-20210118143404755.png)





##  -3. Security Group

Ec2 > Network & Security > Security Groups

![image-20210119090146848](/assets/[AWSSA]EC2/image-20210119090146848.png)



* ëª¨ë“  Inbound trafficì€ ê¸°ë³¸ì ìœ¼ë¡œ blocked
* ëª¨ë“  Outbound Trafficeì€ í—ˆìš©ë¨
* Security Group ê·œì¹™ ìˆ˜ì •í•˜ë©´ ë°”ë¡œ ì ìš©ë¨  â­
* í•˜ë‚˜ì˜ Security Groupì— ì—¬ëŸ¬ê°œì˜ EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìŒ
* EC2ì¸ìŠ¤í„´ìŠ¤ëŠ” ì—¬ëŸ¬ Security groupì— ë¶™ì„ ìˆ˜ ìˆìŒ

* **Stateful**

  * Inboundê·œì¹™ì„ ë°”ê¾¸ë©´ OutboundëŠ” ìë™ìœ¼ë¡œ ì ìš©ë¨

  * ex. outboundê·œì¹™ì„ ë‹¤ ì‚­ì œí•˜ë©´? ì•„ë¬´ ì¼ë„ ì¼ì–´ë‚˜ì§€ ì•ŠìŒ.

(<-> Network Access Control List ëŠ” stateless)

* íŠ¹ì • IPë¥¼ blockí•˜ë ¤ë©´ Network Access Control Listì—ì„œ ì„¤ì •í•´ì¤˜ì•¼ í•¨
* allow ruleì€ ê°€ëŠ¥, deny ruleì€ ë¶ˆê°€ (default : deny everything. allow some)





## -4. EBS (Elastic Block Store)

* EBS : ê°€ìƒì˜ í•˜ë“œë””ìŠ¤í¬. EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë¸”ë¡ ìˆ˜ì¤€ ìŠ¤í† ë¦¬ì§€ ë³¼ë¥¨ì„ ì œê³µ



### EBS Types

* General Purpose SSD

* Provisioned IOPS (ê°€ì¥ ë†’ì€ ì‚¬ì–‘)

* Throughput Optimised Hard Disk Drive

* Cold Hard Disk Drive

* Magnetic

  ![image-20210119091335991](/assets/[AWSSA]EC2/image-20210119091335991.png)



EBS Volume sizeë‚˜ storage typeì„ ë³€ê²½ ê°€ëŠ¥(on the fly - restart í•˜ì§€ ì•Šì•„ë„ ë¨)



ìì£¼ ë‚˜ì˜¤ëŠ” ì§ˆë¬¸!

### EBSì˜ AZë¥¼ ë³€ê²½í•˜ê³ ì í•  ë•ŒëŠ”?

#### **1. ìŠ¤ëƒ…ìƒ· -> AMI -> ìƒˆ Instance**

**ìŠ¤ëƒ…ìƒ·** : photograph of disk

* Incremental : ì´ì „ snapshotì—ì„œ ì—…ë°ì´íŠ¸ ëœ ë¶€ë¶„ë§Œ ì €ì¥
* ì²˜ìŒìœ¼ë¡œ ìŠ¤ëƒ…ìƒ·ì„ ë§Œë“¤ë©´ ì‹œê°„ì´ ì¢€ ê±¸ë¦¼
* root ë””ë°”ì´ìŠ¤ì˜ ìŠ¤ëƒ…ìƒ·ì„ ì°ì„ ë•ŒëŠ” instanceë¥¼ ì¤‘ì§€í•˜ê³  ì§„í–‰í•˜ëŠ”ê²Œ best practice(í•˜ì§€ë§Œ, runningì¼ ë•Œì—ë„ snapshotë§Œë“¤ìˆ˜ëŠ” ìˆìŒ)
* Volumeì€ EC2 ì¸ìŠ¤í„´ìŠ¤ì™€ ê°™ì€ AZì— ìƒì„±ë¨
* EC2 volumeì˜ AZë¥¼ ë³€ê²½í•˜ë ¤ë©´ snapshot -> AMI -> launch



Create Image from EBS Snapshot

![image-20210119103512620](/assets/[AWSSA]EC2/image-20210119103512620.png)

* HVM  / PV
  HVM ê°€ìƒí™” -  AWS í”Œë«í¼ì´ ì œê³µí•˜ëŠ” í•˜ë“œì›¨ì–´ ë³´ì¡° ê¸°ìˆ ì´ ì‚¬ìš©. ê²ŒìŠ¤íŠ¸ VMì€ ê¸°ë³¸ í•˜ë“œì›¨ì–´ í”Œë«í¼ì— ìˆëŠ” ê²ƒì²˜ëŸ¼ ì‹¤í–‰ë˜ì§€ë§Œ, ì„±ëŠ¥ í–¥ìƒì„ ìœ„í•´ ì—¬ì „íˆ PV ë„¤íŠ¸ì›Œí¬ ë° ìŠ¤í† ë¦¬ì§€ ë“œë¼ì´ë²„ê°€ ì‚¬ìš©ë¨.
  PVì™€ HVMì„ ëª¨ë‘ ì§€ì›í•˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•ë„ ìˆì§€ë§Œ ë‘˜ ì¤‘ í•˜ë‚˜ë§Œ ì§€ì›í•˜ëŠ” ìœ í˜•ë„ ìˆìŒ.

-> AMI ë¡œ ê°€ì„œ í•´ë‹¹ image ì„ íƒ

 -> Launch Instance

![image-20210119103609287](/assets/[AWSSA]EC2/image-20210119103609287.png)

* ë‹¤ë¥¸ AZë¥¼ ì„ íƒí•  ìˆ˜ë„ ìˆìŒ

![image-20210119103635746](/assets/[AWSSA]EC2/image-20210119103635746.png)



#### 2. Copy AMI

AZë¿ ì•„ë‹ˆë¼ Regionê°„ì˜ ì´ë™ë„ ê°€ëŠ¥í•¨!

* EC2 volumeì˜ regionì„ ë³€ê²½í•˜ë ¤ë©´ snapshot ->  AMI -> copy to another region -> launch

![image-20210119103853346](/assets/[AWSSA]EC2/image-20210119103853346.png)



### EBS vs Instance Store

AMI ì„ íƒ ì‹œ

AMIì˜ Storageì˜ Root DeviceëŠ” Instance Store(EPHEMERAL STORAGE)ì™€ EBS Backed Volume ì¤‘ ì„ íƒ ê°€ëŠ¥

EBS Volumes : AMIì—ì„œ ì‹œì‘í•˜ëŠ” root deviceëŠ” Amazon EBS Snapshotì—ì„œ ìƒì„±ëœ Amazon EBS Volume

Instance Store Volumes : AWS S3 templateì—ì„œ ìƒì„±í•˜ëŠ” store volume

![image-20210119110120900](/assets/[AWSSA]EC2/image-20210119110120900.png)

* ì„ íƒí•  ìˆ˜ ìˆëŠ” Instance typeì´ ì œí•œë¨

![image-20210119110140558](/assets/[AWSSA]EC2/image-20210119110140558.png)

* ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‹œì‘í•œ í›„ ì¶”ê°€ EBS ë³¼ë¥¨ì€ ì¶”ê°€ì—°ê²° ê°€ëŠ¥. But, ì¸ìŠ¤í„´ìŠ¤ ìŠ¤í† ì–´ ë³¼ë¥¨ì€ ì—°ê²°í•  ìˆ˜ ì—†ìŒ

  ![image-20210119110236158](/assets/[AWSSA]EC2/image-20210119110236158.png)

* ì¸ìŠ¤í„´ìŠ¤ ìŠ¤í† ì–´ ë³¼ë¥¨ì€ Volumesíƒ­ì—ì„œ í™•ì¸ì´ ì•ˆë¨

* Ephemeral(ì¼ì‹œì ì¸) Storage

  * Stopë¶ˆê°€í•¨. Terminateë§Œ ê°€ëŠ¥. hostê°€ ë©ˆì¶”ë©´ ë°ì´í„°ê°€ ì‚¬ë¼ì§
  * RebootëŠ” ê°€ëŠ¥. ë°ì´í„° ì†ì‹¤ ì—†ìŒ





### ENI vs ENA vs EFA (senario questions) â“

* ENI : Elastic Network Interface - VPCì—ì„œ ê°€ìƒ ë„¤íŠ¸ì›Œí¬ ì¹´ë“œë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë…¼ë¦¬ì  ë„¤íŠ¸ì›Œí‚¹ êµ¬ì„± ìš”ì†Œ
  * Management Network
*  EN : Enhanced Networking. Single root I/O Virtualization (SR-IOV)
    *  I/O ì„±ëŠ¥ì´ ë†’ìŒ - r
    * lower CPU util
    * ì¶”ê°€ìš”ê¸ˆ ì—†ìŒ
    * ì¢‹ì€ ë„¤íŠ¸ì›Œí¬ ì„±ëŠ¥ì´ í•„ìš”í•  ë•Œ ì‚¬ìš©
    * ì¸ìŠ¤í„´ìŠ¤ íƒ€ì…ì— ë”°ë¼
      * ENA - ìµœëŒ€ 100gb/s
      * VF - ìµœëŒ€ 10gb/s .. older instancesì— ì£¼ë¡œ ì´ìš©ë¨
      * ëŒ€ë¶€ë¶„ì˜ scenario questionì—ì„œ ë‹µì€ ENA
* Elastic Fabric Adapter
  *  Amazon EC2 ì¸ìŠ¤í„´ìŠ¤ì— ë¶™ì—¬ì„œ **HPC(High Perfomance Computing)** ê³¼ **machine learning** appì„ ê°€ì†í™”í•˜ëŠ”ë° ì‚¬ìš©í•˜ëŠ” ë„¤íŠ¸ì›Œí¬ ë””ë°”ì´ìŠ¤
  * latencyê°€ ì ê³  throughputì´ í¼
  * **OS ìš°íšŒ** ê°€ëŠ¥ - os ì»¤ë„ì„ ìš°íšŒí•´ì„œ EFA deviceì™€ ì§ì ‘ communicate -> faster & low latency. only Linux



#### Exam Tips

* ENI

  basic networking. ì ì€ ë¹„ìš©ìœ¼ë¡œ productionë„¤íŠ¸ì›Œí¬ì™€ ë¶„ë¦¬ëœ management ë„¤íŠ¸ì›Œí¬ë‚˜ logging ë„¤íŠ¸ì›Œí¬ê°€ í•„ìš”í•œ ê²½ìš°

  => ê° ë„¤íŠ¸ì›Œí¬ì— ì—¬ëŸ¬ ENIì‚¬ìš©

* Enhanced Networking
10~100Gbpsì˜ ì†ë„ê°€ í•„ìš”í•  ë•Œ. reliable, hight throuputì´ í•„ìš”í•  ë•Œ

* Elastic Fabric Adaptor
HPC(High Performance Computing)ì„ ê°€ì†í•´ì•¼í•¨. Machine Learning appì´ë‚˜ OS by-passí•„ìš”.



### Encrypted Root Device Volumes & Snapshots - LAB

Root Device Volume - OSê°€ ì˜¬ë¼ê°€ìˆëŠ” HW

ì–´ë–»ê²Œ ì•”í˜¸í™”í•´ì•¼ í• ì§€



* VM ìƒì„± ì‹œ Storage ë¥¼ Encryptí•  ìˆ˜ ìˆìŒ

![image-20210119144002886](/assets/[AWSSA]EC2/image-20210119144002886.png)

* Encryptí•˜ì§€ ì•Šê³  ìƒì„±í•œ ê²½ìš°

  1. snapshotìƒì„±

  2. copy : Encryptionì„¤ì •ì—ì„œ Encryptí™œì„±í™”

     ![image-20210119144311186](/assets/[AWSSA]EC2/image-20210119144311186.png)

  3. AMIë¥¼ ì´ snapshotì—ì„œ ìƒì„±
  4. Launch Instance



#### Exam Tips

* encrypted volume -> ìŠ¤ëƒ…ìƒ· ë§Œë“¤ë©´ ìë™ìœ¼ë¡œ ì•”í˜¸í™”ë¨
* encrypted snapshot -> restoreí•œ volumeì€ ìë™ìœ¼ë¡œ ì•”í˜¸í™”ë¨
* ì•”í˜¸í™”ë˜ì§€ ì•Šì€ snapshotë§Œ ê³µìœ  ê°€ëŠ¥ (ë‹¤ë¥¸ AWSê³„ì • or Public)
* EC2ë§Œë“œëŠ” ì‹œì ì—ì„œë„ ì•”í˜¸í™”ê°€ëŠ¥
* EC2ë§Œë“œëŠ” ì‹œì ì—ì„œ ì•”í˜¸í™” ëª»í–ˆë‹¤ë©´ : snapshot -> copy -> encrtpt -> launch instance





## -5. Spot Instances & Spot Fleets

#### Spot Instance

ë‚¨ëŠ” EC2ìì›ì„ í™œìš©í•˜ëŠ” ê²ƒ. ìµœëŒ€ 90% í• ì¸

*  flexibeí•œ application ì— í™œìš©í•˜ë©´ ì¢‹ìŒ(ex. ë¹…ë°ì´í„°, containerized workloads, CI/CD, ì›¹ì„œë²„, HPC ë“±)

* Persistent, critical, databaseì—ëŠ” ì‚¬ìš©í•˜ë©´ ì•ˆë¨

* Maximum Spot priceë¥¼ ì •í•˜ê³  ê·¸ ê°€ê²©ì„ ë„˜ìœ¼ë©´ 2ë¶„ ë‚´ì— stop / terminateì„ ê²°ì •í•´ì•¼ í•¨

* **Spot block**ì„ ì‚¬ìš©í•˜ë©´ ìµœëŒ€ ê°€ê²© ì´ìƒìœ¼ë¡œ ì˜¬ë¼ê°€ë„ instanceê°€ ì¢…ë£ŒíšŒì§€ ì•Šë„ë¡ í•  ìˆ˜ ìˆìŒ

* capacityì™€ regionì— ë”°ë¼ ë§¤ ì‹œê°„ ê°€ê²©ì´ ë‹¬ë¼ì§

  ![image-20210120143415997](/assets/[AWSSA]EC2/image-20210120143415997.png)

* Request type

  * One-time: maximumê°€ê²© ìœ„ë¡œ ì˜¬ë¼ê°€ë©´ ì¢…ë£Œ
  * persistent : maximumê°€ê²© ì•„ë˜ë¡œ ë‚´ë ¤ê°€ë©´ ë‹¤ì‹œ launch

#### Spot Fleet

ì—¬ëŸ¬ ì¡°í•©ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤+On Demand ì¸ìŠ¤í„´ìŠ¤ + ìµœëŒ€ê°€ê²©ì„ ì •ì˜í˜„ì¬ ì´ìš© ê°€ëŠ¥í•œ ê²ƒë“¤ì´ ëª…ì‹œí•œ ìµœëŒ€ ê°€ê²©ë³´ë‹¤ ì ì„ ê²½ìš°ì— fulfilled

* ê°€ê²©ì œí•œ ì•ˆì—ì„œ target capacityë¥¼ ë§ì¶”ë ¤ê³  try
  * EC2, OS, AZ eã…¡ã…‡ë“±ì„ ì¡°í•©í•˜ì—¬ ì—¬ëŸ¬ Laucn peelì„ ì„¤ì •
  * fleetì´ ê·¸ ì¤‘ì—ê±° ìµœì ì¸ ê±¸ë¡œ ê³ ë¦„
  * ì •í•´ë†“ì€ ê°€ê²© ì œí•œì„ ë„˜ìœ¼ë©´ ì¸ìŠ¤í„´ìŠ¤ëŠ” ë©ˆì¶¤



## -6. EC2 Hibernate

EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ Hibernateí•˜ë©´ : RAMì˜ ì»¨í…ì¸  -> EBS root volumeì— ì €ì¥

Hibernationì´ ëë‚˜ë©´, EBS root volumeë³µêµ¬ & RAM ì»¨í…ì¸  ë¦¬ë¡œë“œ &ì´ì „ì— ìˆ˜í–‰ì¤‘ì´ë˜ í”„ë¡œì„¸ìŠ¤ resume (ëŒê³ ìˆë˜ mysql.. ë“±)

* ì´ì „ì— ë¶™ì–´ìˆë˜ data volumeì´ ë‹¤ì‹œ attachë˜ë©° **ì¸ìŠ¤í„´ìŠ¤IDê°’ ìœ ì§€**
* => í›¨ì”¬ ë¹¨ë¦¬ boot
* ì˜¤ë˜ê±¸ë¦¬ëŠ” í”„ë¡œì„¸ìŠ¤ë‚˜ initializeí•˜ëŠ”ë° ì˜¤ë˜ê±¸ë¦¬ëŠ” ì„œë¹„ìŠ¤ì— ìœ ìš©í•¨
* EC2ë§Œë“œëŠ” ë‹¨ê³„ì—ì„œ Stop - Hibernate behaviorë¥¼ í™œì„±í™”í•˜ë©´ ë¨. Hibernateë¥¼ í™œì„±í™”í•˜ë ¤ë©´ Root volumeì€ Encryptë˜ì–´ìˆì–´ì•¼ í•¨



#### Exam Tips

* **OS ë¥¼ ë¦¬ë¡œë“œí•˜ì§€ ì•Šì•„ë„ ë˜ê¸° ë•Œë¬¸ì— ë¶€íŒ… ì‹œê°„ì´ í›¨ì”¬ ë¹ ë¦„**
* Instance Ram 150ê¸°ê°€ ì´í•˜
* Instance families - C, M, R 3~5
* ìœˆë„ìš°, Amazion Linux2 AMi, Ubuntuì—ì„œ ê°€ëŠ¥
* 60ì¼ ì´ìƒ hibernateë  ìˆ˜ëŠ” ì—†ìŒ
* On-demand & Reserved ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ì‚¬ìš© ê°€ëŠ¥



## -7 Cloud Watch 101

í¼í¬ë¨¼ìŠ¤ë¥¼ **ëª¨ë‹ˆí„°ë§**

* Compute : EC2, Autoscaling Groups, Elastic Load Balancer, Route53 Health Checks
  * EC2ì—ì„œëŠ” ë””í´íŠ¸ë¡œ 5ë¶„ë‹¨ìœ„ë¡œ ëª¨ë‹ˆí„°ë§. 1ë¶„ë‹¨ìœ„ë¡œ ë°”ê¿€ ìˆ˜ ìˆìŒ
  * trigger notification
* Storage & Content Delivery : EBS Volumes, Storage Gateways, CloudFront

<->  CloudTrail : **ê°ì‹œ** CCTV - AWSí”Œë«í¼ ë‚´ì˜ APIí˜¸ì¶œì„ ëª¨ë‹ˆí„°ë§

### í•˜ìœ„ë©”ë‰´

* Dashboards -
* Alerms - íŠ¹ì • í•œê³„ê°’ì— ë‹¿ìœ¼ë©´ ì•ŒëŒ
* Events - AWS ë¦¬ì†ŒìŠ¤ì˜ ë³€í™”ì— ëŒ€ì‘í•  ìˆ˜ ìˆë„ë¡
* Logs - aggregatem, monitor, store logs



### LAB

* ì¸ìŠ¤í„´ìŠ¤ ìƒì„±

detailed monitoring - 1ë¶„ë‹¨ìœ„. free tier ì•„ë‹˜

![image-20210120160738728](/assets/[AWSSA]EC2/image-20210120160738728.png)



* ì•ŒëŒ ìƒì„±

  Management & Government > Cloudwatch > Alarm > Create an alerm

  CPU Utilization >= 90 ì¼ë•Œë¡œ ì•ŒëŒì„ ìƒì„±

![image-20210120161159529](/assets/[AWSSA]EC2/image-20210120161159529.png)



* í…ŒìŠ¤íŠ¸

 ```
$ ssh ec2-user@3.35.16.175 -i MyUSE1KP.pem  // EC2 ì ‘ì†
[ec2-user@ip-172-31-38-83 ~]$ sudo su // root mode
[ec2-user@ip-172-31-38-83 ~]$ while true; do echo; done; // ë¬´í•œë£¨í”„
 ```

![image-20210120162556208](/assets/[AWSSA]EC2/image-20210120162556208.png)

ì•ŒëŒ ë©”ì¼



## -8. AWS Command Line & IAM

### AWS Command Lineì— user Id/keyì¶”ê°€

IAM ì„¤ì •(ìœ ì €ì— Programatic Access ì¶”ê°€ )í•˜ë©´ CLIì—ì„œ awsë¦¬ì†ŒìŠ¤ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìŒ

![image-20210120163849381](/assets/[AWSSA]EC2/image-20210120163849381.png)

CLIì—ì„œ `aws configure`ì…ë ¥ í›„  Access key idì™€ Secret Access Key ì…ë ¥í•˜ë©´ AWSë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼ ê°€ëŠ¥



###  IAM Rolesì„ ì´ìš©

1. IAMë§Œë“¤ê¸° - EC2, Administor Access

![image-20210120164718660](/assets/[AWSSA]EC2/image-20210120164718660.png)

![image-20210120164750977](/assets/[AWSSA]EC2/image-20210120164750977.png)

2. EC2ì— IAM Role attach

   ![image-20210120165115970](/assets/[AWSSA]EC2/image-20210120165115970.png)

   ![image-20210120165141167](/assets/[AWSSA]EC2/image-20210120165141167.png)

3. ì¸ìŠ¤í„´ìŠ¤ì— IAM Role ì´ ì¶”ê°€ëœ ê²ƒì´ í™•ì¸ ê°€ëŠ¥

   ![image-20210120165252696](/assets/[AWSSA]EC2/image-20210120165252696.png)

   ![image-20210120165326019](/assets/[AWSSA]EC2/image-20210120165326019.png)



4. EC2 ì½˜ì†”ì—ì„œ  `aws s3 ls` í•´ë³´ë©´ ë¦¬ì†ŒìŠ¤ ì ‘ê·¼ ê°€ëŠ¥

   ![image-20210120165420024](/assets/[AWSSA]EC2/image-20210120165420024.png)



#### Exam Tips

* Roleì„ ì£¼ëŠ” ê²ƒì´ EC2ì— access key ë¥¼ ì£¼ëŠ”ê²ƒë³´ë‹¤ í›¨ì”¬ ì•ˆì „í•¨
* Roleì´ ë” ê´€ë¦¬í•˜ê¸° ì‰¬ì›€
* Role ìƒì„± í›„ command lineì´ë‚˜ consoleì„ í†µí•´ì„œ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ê·¼ ê°€ëŠ¥
* Roleì€ universla(regionì— ê´€ê³„ ì—†ìŒ)





## -9. EC2 ì‹œì‘ ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€

ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì‹œ

* IAMì— AdminAccessì¶”ê°€

  ![image-20210120170427986](/assets/[AWSSA]EC2/image-20210120170427986.png)

* ê³ ê¸‰ ì„¸ë¶€ ì •ë³´ ë¶€ë¶„ì— ì‹œì‘ Bash Scriptì¶”ê°€

![image-20210120170301662](/assets/[AWSSA]EC2/image-20210120170301662.png)

Bash Scripting

```sh
#!/bin/bash
yum update -y
yum install httpd -y
service httpd start
chkconfig cttpd on
cd /var/www/html
echo "<html><h1>hiiiii </h1></html>" > index.html
aws s3 mb s3://asdlfjalkjdljflkasdjflkas
aws s3 cp index.html s3://asdlfjalkjdljflkasdjflkas
```



ì¸ìŠ¤í„´ìŠ¤ ìƒì„± í›„ publicì£¼ì†Œë¡œ ì ‘ì†í•´ë³´ë©´



![image-20210120171159738](/assets/[AWSSA]EC2/image-20210120171159738.png)í˜ì´ì§€ ë– ìˆëŠ”ê²ƒ í™•ì¸ ê°€ëŠ¥!



## -10. Instance Meta Data

sshì ‘ì†í•´ì„œ ëª…ë ¹ì–´ë¥¼ í†µí•´ bootstrap codeë‚˜ ê¸°íƒ€ ì¸ìŠ¤í„´ìŠ¤ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŒ

ì´ë¥¼ Bootstrapì½”ë“œì— ë„£ì–´ì„œ, ì¸ìŠ¤í„´ìŠ¤ ì‹œì‘ë˜ë©´ í¼ë¸”ë¦­ipë¥¼ ì•ŒëŒìœ¼ë¡œ ë³´ë‚´ê±°ë‚˜ dbì— ì €ì¥í•˜ëŠ” ë“± í™œìš©í•  ìˆ˜ ìˆìŒ

```sh
[ec2-user@ip-172-31-47-46 ~]$ curl http://169.254.169.254/latest/user-data / bootstrap code
#!/bin/bash
yum update -y
yum install httpd -y
service httpd start
chkconfig httpd on
cd /var/www/html
echo "<html><h1>hiiiii </h1></html>" > index.html
aws s3 mb s3://sixvlkxclkwixksnkaljsv /

```

```sh
curl http://169.254.169.254/latest/meta-data // ë³¼ ìˆ˜ ìˆëŠ” ì˜µì…˜ë“¤
ami-id
ami-launch-index
ami-manifest-path
block-device-mapping/
events/
hibernation/
hostname
iam/
identity-credentials/
instance-action
instance-id
instance-life-cycle
instance-type
local-hostname
local-ipv4
mac
metrics/
network/
placement/
profile
public-hostname
public-ipv4
public-keys/
reservation-id
security-groups
[ec2-user@ip-172-31-47-46 ~]$ curl http://169.254.169.254/latest/meta-data/public-ipv4
3.35.49.36[ec2-user@ip-172-31-47-46 ~]$ curl http://169.254.169.254/latest/meta-data/public-ipv4 > myip.txt
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100    10  100    10    0     0   2000      0 --:--:-- --:--:-- --:--:--  2000
[ec2-user@ip-172-31-47-46 ~]$ ls
myip.txt
[ec2-user@ip-172-31-47-46 ~]$

```



## -11. íŒŒì¼ ìŠ¤í† ë¦¬ì§€ ì„œë¹„ìŠ¤

â“ ì´ê²ƒë“¤ê³¼ S3ì˜ ì°¨ì´ëŠ”? S3ëŠ” distributed object based storage; not a file system

### EFS

ì—¬ëŸ¬ EC2 ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ì‚¬ìš©ë  ìˆ˜ ìˆëŠ” NFSê¸°ë°˜ íŒŒì¼ ì‹œìŠ¤í…œ

Linux instance, Linux-based appì„ ìœ„í•œ ë¶„ì‚°ëœ & ê³ ê°€ìš©ì„± ìŠ¤í† ë¦¬ì§€

* NFSv4 í”„ë¡œí† ì½œ (NFS: ë„¤íŠ¸ì›Œí¬ ìƒì˜ íŒŒì¼ì„ ì§ì ‘ ì—°ê²°ëœ ìŠ¤í† ë¦¬ì§€ì— ì ‘ê·¼í•˜ëŠ” ë°©ì‹ê³¼ ë¹„ìŠ·í•œ ë°©ì‹ìœ¼ë¡œ ì ‘ê·¼í•˜ê²Œ í•´ì¤Œ )
* ìŠ¤í† ë¦¬ì§€ ì‚¬ìš©í•˜ëŠ” ë§Œí¼ ëˆì„ ëƒ„(pre-provisioning ë¶ˆí•„ìš”)
* í˜íƒ€ë°”ì´íŠ¸ ë‹¨ìœ„ë¡œ scale up
* ìˆ˜ì²œê°œì˜ NFS ì»¤ë„¥ì…˜ì„ ë™ì‹œì— ê°€ì§ˆ ìˆ˜ ìˆìŒ
* ë¦¬ì „ ë‚´ì—ì„œ ì—¬ëŸ¬ AZì— ê±¸ì³ ë°ì´í„°ê°€ ì €ì¥ë¨
* Read after Write Consistency



### Windows FSx

* SMB(ì„œë²„ ë©”ì‹œì§€ ë¸”ë¡)í”„ë¡œí† ì½œ ê¸°ë°˜
* ì¤‘ì•™í™”ëœ ìŠ¤í† ë¦¬ì§€
* Windows-based application.
* AD User, Access Control lists, groups and security policies ì§€ì›



### Lustre FSx

* Compute-intensive workì— ìµœì í™”ëœ íŒŒì¼ì‹œìŠ¤í…œ (ex. big data, HPC, video processing ..)
* sub-millisecondë‹¨ìœ„ ì ‘ê·¼ ë° ì´ˆë‹¹ ìˆ˜ë°±ê¸°ê°€ë°”ì´íŠ¸ì˜ ì²˜ë¦¬ëŸ‰ì„ ì§€ì›



## -12. EC2 Placement Groups

ìƒˆ EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‹œì‘í•˜ë©´ EC2 ì„œë¹„ìŠ¤ëŠ” ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ê°€ ê¸°ë³¸ í•˜ë“œì›¨ì–´ ì „ë°˜ì— ë¶„ì‚°ë˜ë„ë¡ í•˜ì—¬ ìƒí˜¸ ê´€ë ¨ ì˜¤ë¥˜ì˜ ìœ„í—˜ì„ ì¤„ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ *ë°°ì¹˜ ê·¸ë£¹*ì„ ì‚¬ìš©í•˜ë©´ ì›Œí¬ë¡œë“œì˜ ìš”êµ¬ ì‚¬í•­ì„ ì¶©ì¡±í•˜ë„ë¡ í•˜ëŠ” *ë…ë¦½ì * ì¸ìŠ¤í„´ìŠ¤ì˜ ê·¸ë£¹ì˜ ë°°ì¹˜ì— ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### types

* Clustered Placement Group
  * **í•˜ë‚˜ì˜ AZ**ì— ë§¤ìš° ê°€ê¹Œì´ ìœ„ì¹˜
  * **low latency, high throughput** -> HPC

* Spread Placement Group

  * ê°ê° ê³ ìœ í•œ ë™ì— ë°°ì¹˜ëœ ì¸ìŠ¤í„´ìŠ¤ ê·¸ë£¹

  * clusteredì˜ ë°˜ëŒ€

  * **Individual Ciritical EC2 instances**

    ![image-20210121105018745](/assets/[AWSSA]EC2/image-20210121105018745.png)

* Partitioned Placement Group

  * ê° ê·¸ë£¹ì„ partitionì´ë¼ëŠ” ë…¼ë¦¬ ì„¸ê·¸ë¨¼íŠ¸ë¡œ ë‚˜ëˆ”

  * ê° partitionì€ rack, network, power source ë“±ì´ ë¶„ë¦¬ë¨ (ê¸°ë³¸ í•˜ë“œì›¨ì–´ë¥¼ ê³µìœ í•˜ì§€ ì•ŠìŒ)

  * **Multiple EC2 instances HDFS, HBase, Cassandra**  

    ![image-20210121105000766](/assets/[AWSSA]EC2/image-20210121105000766.png)

â“ spreadë‘ partitionì´ë‘ ì–´ë–»ê²Œ ë‹¤ë¥´ë‹¤êµ¬? partition ì•ˆì— ì—¬ëŸ¬ instance



### features

* Placement groupì˜ ì´ë¦„ì€ AWS accountë‚´ì—ì„œ uniqueí•´ì•¼í•¨

* í•˜ë‚˜ì˜ placement group ë‚´ì—ì„œëŠ” íŠ¹ì • íƒ€ì…ì˜ instances ë§Œ launchë  ìˆ˜ ìˆìŒ

* í•˜ë‚˜ì˜ clustered placement group ë‚´ì• ëŠ” homogeneous instance ê¶Œì¥

* ë‘ placement groupì„ í•©ì¹ ìˆ˜ëŠ” ì—†ìŒ

* ê¸°ì¡´ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ Placement group ë‚´ë¡œ ì˜®ê¸¸ ìˆ˜ ìˆìŒ. (ì˜®ê¸°ê¸° ì „ì— stopí•´ì•¼ í•¨)



## -13. HPC on AWS

#### Data Transfer

* Snowball, Snowmobile(terabytes/petabytes)
* AWS DataSync
* Direct Connect
  : Dedicated network from on-premise to AWS

#### Compute & Networking

* EC2 instannce (GPU, CPU optimized)
* EC2 fleets(Spot Instances or Spot Fleets)
* Placement groups(Cluster placement groups)
* Ennhanced Nnetworking signle root i/o virtualization(SR-IOV â“ )
* Elastic Network Adapters or VF interface
* Elastic Fabric Adapters

#### Storage

* Isntance-sttached
  * EBS
  * Instance Store
* Network Storage
  * Amazon S3
  * Amazon EFS
  * Amazon FSx for Lustre

#### Orchestration & Automation

* Aws Batch
* AWS ParallelCluster



## -14. AWS WAF

WAF : web application firewall. Monitor HTTP, HTTPS requestes forwaredd to cloudfront, load balencer, or API Gateway

ê¸°ë³¸ì ìœ¼ë¡œ 3ê°œì˜ behaviorë¥¼ ê°€ì§

1. ëª…ì‹œí•˜ëŠ” ê²ƒ ì™¸ì— ëª¨ë‘ í—ˆìš©
2. ëª…ì‹œí•˜ëŠ” ê²ƒ ì™¸ì— ëª¨ë‘ ì°¨ë‹¨
3. ëª…ì‹œí•œ ì„±ì§ˆì„ ê°€ì§„ requestë¥¼ count

ê·¸ ì™¸ì—ë„,

* íŠ¹ì • ip (ACLì„ ì‚¬ìš©í•´ë„ íŠ¹ì • IP block ê°€ëŠ¥)
* íŠ¹ì • êµ­ê°€
* Request headerì— íŠ¹ì • ê°’
* requestì˜ íŠ¹ì • string
* requestê¸¸ì´
* SQL injection í¬í•¨ ì—¬ë¶€
* ì•…ì˜ì  ìŠ¤í¬ë¦½íŠ¸ í¬í•¨ ì—¬ë¶€
