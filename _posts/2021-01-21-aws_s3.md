---
title: "[AWS] Software Architect Associate - Udemyê°•ì˜ ì •ë¦¬ (1)S3"
date: 2021-01-21 00:00:00 -0400
categories: aws aws-certificate aws-sa udemy
---
>ë³¸ í¬ìŠ¤íŠ¸ëŠ” AWS Solution Architect CERTIFICATE ì¤€ë¹„ ë° udemy ê°•ì˜ë¥¼ ì •ë¦¬í•˜ë©° ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.
**Udemy ê°•ì˜** [https://www.udemy.com/course/aws-certified-solutions-architect-associate/](https://www.udemy.com/course/aws-certified-solutions-architect-associate/)
**AWS Solution Architect Associateë€?** [https://aws.amazon.com/ko/certification/certified-solutions-architect-associate/](https://aws.amazon.com/ko/certification/certified-solutions-architect-associate/)

# ìš”ì•½
## ğŸ’¡ ìƒˆë¡œ ì•Œê²Œëœ ì‚¬ì‹¤
* S3ì— ì˜¬ë¦´ ìˆ˜ ìˆëŠ” ìµœëŒ€ íŒŒì¼ ì‚¬ì´ì¦ˆëŠ” 5TB
* 'AWS Glacier' - s3ëŒ€ë¹„ í›¨ì”¬ ì €ë ´í•˜ì§€ë§Œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ë•Œ ì˜¤ë˜ê±¸ë¦¬ëŠ” ìŠ¤í† ë¦¬ì§€ ì„œë¹„ìŠ¤
* S3 versioning - íŒŒì¼ì˜ ìˆ˜ì •, ì‚­ì œëœ ëª¨ë“  ë²„ì „ì„ ê´€ë¦¬í•  ìˆ˜ ìˆìŒ
* lifecycle - ì—…ë¡œë“œ í›„ ëª‡ì¼, ì‚­ì œ í›„ ëª‡ì¼ ë“±ì˜ ê¸°ê°„ ì„¤ì •í•˜ì—¬ ì ì ˆí•œ ìŠ¤í† ë¦¬ì§€ í´ë˜ìŠ¤ë¡œ ì˜®ê²¨ì„œ, ë¹„ìš©ì„ ìµœì í™”í•˜ë©´ì„œ íŒŒì¼ë“¤ì„ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆìŒ.
* S3 Select - S3ì— ì—…ë¡œë“œ ëœ ëŒ€ìš©ëŸ‰ íŒŒì¼(ex. zipìœ¼ë¡œ í•©ì¶•ëœ csv)ì— ê°„ë‹¨í•œ SQL expressionì„ í†µí•´ ë°ì´í„°ì˜ ì¼ë¶€ë§Œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŒ

## ğŸ¤”  ì²˜ìŒ ë“¤ì„ ë•Œ í–‡ê°ˆë ¸ë˜ ë¶€ë¶„
* IAM - Identity Federation : AWS ìœ ì €ê°€ ì•„ë‹ˆë©´ì„œ ì¼ì‹œì ìœ¼ë¡œ ì ‘ì†ê¶Œí•œì„ ë°›ì•„ì„œ AWSì— ì ‘ì†í•˜ëŠ” ì„œë¹„ìŠ¤
* S3 Availability & Durability
  * Availability = ìœ íš¨ì„± - ì •ìƒì ìœ¼ë¡œ ì´ìš© ê°€ëŠ¥í•  í™•ë¥ 
  * Durability = ë°ì´í„°ê°€ lostë˜ì§€ ì•Šì„ í™•ë¥ 
* S3 Object lock vs. Glacier Vault lock
  * S3 storage - Hot storage(S3, IA, Intelligent Tiering)ì— ì ìš©. ê°œë³„ Object ë˜ëŠ” ë²„í‚·ë‹¨ìœ„ë¡œ ì ìš© ê°€ëŠ¥
  * Glacier Vault lock - Cold storage(Glacier)ì— ì ìš©. vaultë‹¨ìœ„ë¡œ ì ìš©
* Cross Region Repliationì—ì„œ íŒŒì¼ì„ ì‚­ì œí–ˆë‹¤ê°€ ë³µêµ¬í•˜ëŠ”ê²½ìš° (= delete markerë¥¼ ì‚­ì œí•˜ëŠ”ê²½ìš°)ëŠ” ì–´ë–»ê²Œ ë˜ì§€? â“
* S3 Signed url vs. CloudFront signed url â“
* Datasync vs. Snowball vs. Storage Gateway
  * DataSync : On-premise to Cloud ì˜¨ë¼ì¸ íŒŒì¼ ì „ì†¡ ì„œë¹„ìŠ¤
  * Snowball : ì—£ì§€ì»´í“¨íŒ…, ì—£ì§€ ìŠ¤í† ë¦¬ì§€ ë“±ì— í™œìš©í•  ìˆ˜ ìˆëŠ” ë””ë°”ì´ìŠ¤(petabyteë‹¨ìœ„ì˜ ë°ì´í„° ì „ì†¡ ì§€ì›)
  * Storage Gateway : í•˜ì´ë¸Œë¦¬ë“œ í´ë¼ìš°ë“œ ìŠ¤í† ë¦¬ì§€ ì„œë¹„ìŠ¤. ë°±ì—…ì„ í´ë¼ìš°ë“œë¡œ ì´ë™í•˜ê³ , í´ë¼ìš°ë“œ ìŠ¤í† ë¦¬ì§€ì—ì„œ ì§€ì›ë˜ëŠ” ì˜¨í”„ë ˆë¯¸ìŠ¤ íŒŒì¼ ê³µìœ ë¥¼ ì‚¬ìš©í•˜ê³ , ì˜¨í”„ë ˆë¯¸ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ AWSì˜ ë°ì´í„°ì— ë‚®ì€ ì§€ì—° ì‹œê°„ìœ¼ë¡œ ì•¡ì„¸ìŠ¤ â“


<br>

---------------------
# 01. IAM

## -1. IAM 101
IAM = AWSë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì ‘ê·¼ ê´€ë¦¬
* Centralized control
* Shared Access
* Granular Permission : ì„¸ë¶„í™”ëœ ê¶Œí•œ
* Identity Federation : í˜ì´ìŠ¤ë¶ ë“±ê³¼ ê³„ì • ê³µìœ  â“
* Multifactor Authentication â­
* Temporary access
* Password Rotation Policy
* ë‹¤ë¥¸ AWS ì„œë¹„ìŠ¤ì™€ integration
* PCI DSS(ì§€ë¶ˆ ì¹´ë“œ ì‚°ì—… ë°ì´í„° ë³´ì•ˆ í‘œì¤€) ì¤€ìˆ˜

**í•µì‹¬ ìš©ì–´**
1. **Users**
2. **Groups** : ê·¸ë£¹ì˜ ìœ ì €ë“¤ì€ ê·¸ë£¹ì˜ permissionì„ ìƒì†ë°›ìŒ
3. **Policies** : JSONí˜•íƒœì˜ Policy documentation. ì–´ë–¤ user, role, groupì— ë¬´ì—‡ì„ í—ˆìš©í•  ê²ƒì¸ì§€ë¥¼ ì •ì˜í•¨
4. **Roles** : ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ ê¶Œí•œ. ìœ ì €ì—ê²Œ ì´ roleì„ í• ë‹¹í•¨

## -2. IAM ëŒ€ì‹œë³´ë“œ ë‘˜ëŸ¬ë³´ê¸°
![](/assets/[AWSSA]S3/2021-01-15-aws_s3-2758cf29.png)
* IAMì‚¬ìš©ì ë¡œê·¸ì¸ ë§í¬ : ì´ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•˜ëŠ” URL
* MFA(Multi Factor Auth) í™œì„±í™”
: ë£¨íŠ¸ì‚¬ìš©ìëŠ” god modeì™€ ë‹¤ë¦„ ì—†ìŒ. í•¨ë¶€ë¡œ ì ‘ê·¼í•  ìˆ˜ ì—†ë„ë¡ google auth app ë“±ì„ í†µí•œ ì´ì¤‘ ë³´ì•ˆì„ ì„¤ì •í•  ê²ƒ
* user ìƒì„±(global based)
  Access Type
  * Programmatic access(access key Idì™€ secret access keyë¥¼ ë°œê¸‰ë°›ê³  EC2ë“±ì—ì„œ ì ‘ê·¼)
  * AWS management console access : ì½˜ì†”ì—ì„œ ì§ì ‘ ì ‘ê·¼
* Group ìƒì„±
  * ì •ì±… ì—°ê²°
  * ìœ ì € ì¶”ê°€
* Role ìƒì„±
* ë¹„ë°€ë²ˆí˜¸ ê·œì¹™ ì„¤ì •

## -3. Billing Alarm ì„¤ì •
ì–´ë–¤ ì§€í‘œì— ëŒ€í•´, ì–´ë–¤ ì¡°ê±´ì—ì„œ(Static/ ì´ìƒê°ì§€), ëˆ„êµ¬ì—ê²Œ ì•ŒëŒì„ ë³´ë‚¼ ê²ƒì¸ì§€ ì„¤ì • ê°€ëŠ¥
![](/assets/[AWSSA]S3/2021-01-15-aws_s3-036ae81c.png)



<br>
# 02. S3
## -1. S3
### S3 : Simple Storage service
* Object based(íŒŒì¼ë‹¨ìœ„)
* Bucket ì€ Folderì™€ ê°™ì€ ê°œë…
* ì´ë¦„ì€ globally uniqueí•´ì•¼í•¨ â­
* ì—…ë¡œë“œ ì„±ê³µì‹œ 200 response ë°˜í™˜ â­

### Object : ê·¸ëƒ¥ íŒŒì¼ì´ë¼ ìƒê°í•˜ë©´ ë¨
* Key : objectì´ë¦„
* Value : byte sequence **(0Bytes ~ 5TB)**
* Version Id
* Metadata
* Subresources - Access Control List, Torrent

### Data Consistency
* PUSTS - Read after write consistency : ë°”ë¡œ ë³€í™”ëœ ê°’ì„ ë³¼ ìˆ˜ ìˆìŒ
* overwrite PUTS & DELETES - Eventual consistency â­ : propagate timeì´ ì†Œìš”ë¨

### Guarantee â­
* Availability(ìœ íš¨ì„± - ì •ìƒì ìœ¼ë¡œ ì´ìš© ê°€ëŠ¥) - **99.9%**
* Durability(ë°ì´í„°ê°€ lostë˜ì§€ ì•Šì„ í™•ë¥ ) - 99.9999 **(9ê°€ 11ê°œ)** %


### Restricting Bucket Access

* Bucket Policies - ì „ì²´ ë²„í‚·ì— ëŒ€í•´ ì ìš©
* Object Policies - ê°œë³„ íŒŒì¼ì— ëŒ€í•´ ì ìš©
* IAM Policies to Users & Groups - ìœ ì €ì™€ ê·¸ë£¹ì— ëŒ€í•´ ì ìš©


### ë°ì´í„° ìŠ¤í† ë¦¬ì§€ ì¢…ë¥˜(storage classes)
![](/assets/[AWSSA]S3/2021-01-15-aws_s3-8d13a468.png)
* S3 standard : 99.99 Availability & 11 9s Durability
* S3 IA : ìì£¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” íŒŒì¼ì´ ë§ì„ë•Œ ì‚¬ìš©
* One Zone IA : íšŒë³µë ¥ ë–¨ì–´ì§. (Multiple Availability Zone Data Resilienceê°€ í•„ìš”í•˜ì§€ ì•Šì€ ê²½ìš° ì‚¬ìš©)
* Intelligent Tiering : ìë™ìœ¼ë¡œ classê´€ë¦¬
* Glacier : durable, low cost, but ì ‘ê·¼ì‹œê°„ì´ ì˜¤ë˜ê±¸ë¦¼
* Glacier Deep Archieve : 12ì‹œê°„ ì´ìƒì˜ retrieval time (ê°€ì¥ ì €ë ´)

### S3 Pricing

 S3 ìŠ¤í† ë¦¬ì§€ í´ë˜ìŠ¤ë¥¼ ê²°ì •í•  ë•ŒëŠ” **ìŠ¤í† ë¦¬ì§€ ìš”ê¸ˆ, ìš”ì²­ ë° ë°ì´í„° ê²€ìƒ‰ ìš”ê¸ˆ, ë°ì´í„° ì „ì†¡ ë° ì „ì†¡ ê°€ì†í™” ìš”ê¸ˆ ê·¸ë¦¬ê³  ë°ì´í„° ê´€ë¦¬ ê¸°ëŠ¥ ìš”ê¸ˆ**ì´ë¼ëŠ” ë„¤ ê°€ì§€ ë¹„ìš© ìš”ì†Œë¥¼ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤.

**ìŠ¤í† ë¦¬ì§€ Pricing**

![image-20210112064340007](/assets/[AWSSA]S3/image-20210112064340007.png)

Intelligent Tiering - Infrequent Access Tierê°€ ìˆì–´ì„œ ê°€ê²©ì„ ì¤„ì¼ ìˆ˜ ìˆì§€ë§Œ, ëª¨ë‹ˆí„°ë§ì— ëŒ€í•œ ì¶”ê°€ cost

![image-20210112064449619](/assets/[AWSSA]S3/image-20210112064449619.png)

Glacierë¶€í„°ëŠ” ì €ì¥ì— ëŒ€í•´ì„œëŠ” 1ì„¼íŠ¸/GBë„ ì•ˆ ë˜ëŠ” ê°€ê²©ì„



**ìš”ì²­ ë° ë°ì´í„° ê²€ìƒ‰**

![image-20210113082708107](/assets/[AWSSA]S3/image-20210113082708107.png)

IAëŠ” ìš”ì²­ì— ëŒ€í•œ ë¹„ìš©ì´ 2ë°° ë¹„ì‹¸ê³  ìŠ¤í† ë¦¬ì§€ì— ëŒ€í•œ ë¹„ìš©ì´ 2ë°° ì €ë ´


Pricingì¤‘ì—ëŠ” S3 Standardê°€ ê°€ì¥ ë¹„ìŒˆ.

One Zone - IA : ìµœì†Œ 3ê°œì˜ ê°€ìš© ì˜ì—­ì— ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” S3 ìŠ¤í† ë¦¬ì§€ì™€ ë‹¬ë¦¬ í•˜ë‚˜ì˜ AZì—ë§Œ ì €ì¥í•˜ì—¬ 20% ì ê²Œ ë“¬. (ê°€ìš©ì„± ë° ë³µì›ë ¥ì´ í•„ìš” ì—†ëŠ” ê³ ê°ì—ê²Œ ì í•©)





### Security And Encryption

ê¸°ë³¸ì ìœ¼ë¡œ ìƒˆë¡œ ë§Œë“  ë²„í‚·ì€ PRIVATE.

* Bucket Policies
* Access Control Lists

ë¥¼ í†µí•´ì„œ ë²„í‚·ì˜ ì ‘ê·¼ì„ ì œì–´í•  ìˆ˜ ìˆìŒ

Access logë¥¼ ìƒì„±í•˜ì—¬ ë‹¤ë¥¸ ê³„ì •ì˜ ë‹¤ë¥¸ ë²„í‚·ì— ì €ì¥í•˜ë„ë¡ í•  ìˆ˜ë„ ìˆìŒ


Encryption

* Encryption In Transit (ì „ì†¡)
  * **SSL/TLS**

* Encryption AT Rest(ì„œë²„ì‚¬ì´ë“œ)
  * **S3 Managed Keys - SSE-S3**
  * **AWS Key Management Service, Managed Keys - SSE-KMS**
  * **Server Side Encryption With Customer Provided Keys - SSE-C**
* Client Side Encryption(í´ë¼ì´ì–¸íŠ¸)
: Objectë‹¨ìœ„ Encryption : íŒŒì¼ > ì†ì„± > ì„œë²„ ì¸¡ ì•”í˜¸í™” ì„¤ì •

![image-20210112065621831](/assets/[AWSSA]S3/image-20210112065621831.png)



ë²„í‚· ë‹¨ìœ„ Encryption : ë²„í‚· > ì†ì„± > ê¸°ë³¸ ì•”í˜¸í™”(Default Encryption)

![image-20210112065749952.png](/assets/[AWSSA]S3/image-20210112065749952.png)


## -2. Versioning & Lifecycle
### Versioning

* Objectì˜ ëª¨ë“  ë²„ì „ì„ ì €ì¥í•¨(ëª¨ë“  write, deleteëœ ê²ƒ í¬í•¨)
* Backup toolë¡œì¨ í›Œë¥­í•¨
* í•œë²ˆ enable í•˜ë©´ disable ë¶ˆê°€(suspendë§Œ ê°€ëŠ¥)
* Lifecycle ruleê³¼ í†µí•©
* â­ â€‹**MFA Delete ì œê³µ**



ë²„í‚· ë§Œë“œëŠ” ì§€ì ì—ì„œ Versioning í™œì„±í™”

![image-20210112074858130](/assets/[AWSSA]S3/image-20210112074858130.png)



ë²„ì „ ë‚˜ì—´ì„ í™œì„±í™”

![image-20210112075015915](/assets/[AWSSA]S3/image-20210112075015915.png)



ê° ë²„ì „ë³„ë¡œ publicì—¬ë¶€ë¥¼ ë‹¬ë¦¬ ì„¤ì • ê°€ëŠ¥

![image-20210112075140855](/assets/[AWSSA]S3/image-20210112075140855.png)

ê°ì²´ urlë’¤ì— ë²„ì „ ì½”ë“œê°€ ë¶™ì–´ìˆìŒ

![image-20210112075203992](/assets/[AWSSA]S3/image-20210112075203992.png)



ê°ì²´ë¥¼ ì‚­ì œí•´ë„ ë²„ì „ ë‚˜ì—´ì„ í™œì„±í™” í•˜ë©´ í•´ë‹¹ íŒŒì¼ì´ ë³´ì„

![image-20210112075310837](/assets/[AWSSA]S3/image-20210112075310837.png)



ì‚­ì œë§ˆì»¤ë¥¼ ì‚­ì œí•˜ë©´ ë‹¤ì‹œ restore

![image-20210112075407562](/assets/[AWSSA]S3/image-20210112075407562.png)ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì–´ë–¤ ë²„ì „ì„ ì˜êµ¬ ì‚­ì œí•  ìˆ˜ëŠ” ìˆìŒ



ë²„í‚· > ì†ì„±ê´€ë¦¬ > ë²„í‚· ë²„ì „ ê´€ë¦¬ë¥¼ ë³´ë©´, versioningì„ suspendí•  ìˆ˜ ëŠ” ìˆì§€ë§Œ disableì€ ì•ˆë¨

![image-20210112075535259](/assets/[AWSSA]S3/image-20210112075535259.png)



## Lifecycle

* storage tierê°„ì— ìë™ìœ¼ë¡œ ì˜¤ë¸Œì íŠ¸ë¥¼ ì´ë™ì‹œí‚´

* versioningê³¼ í•¨ê»˜ ì‚¬ìš© - í˜„ì¬ ë²„ì „ê³¼ ì´ì „ ë²„ì „ì— ì ìš© ê°€ëŠ¥



management > Lifecycle rule > ê·œì¹™ ìƒì„±

![image-20210112080629393](/assets/[AWSSA]S3/image-20210112080629393.png)

ì´ì „í•  tier, ì¼ìˆ˜ ë“±ì„ ì…ë ¥í•´ì£¼ë©´

![image-20210112080649118](/assets/[AWSSA]S3/image-20210112080649118.png)

ê·œì¹™ ìƒì„± ì™„ë£Œ



## -3. Lock Policies

###  S3 Object Lock

WORM(Write Once Read Many) ëª¨ë¸ì—ëŠ” Object Lockì„ ì‚¬ìš©í•  ê²ƒ.
**ê°œë³„ object ë˜ëŠ” ì „ì²´ Bucket**ì— ëŒ€í•´ ì ìš© ê°€ëŠ¥

* Governance Mode - ìœ ì €ê°€ íŠ¹ë³„í•œ ê¶Œí•œ ì—†ì´ëŠ” overwrite, delete, lock ì„¤ì • ë³€ê²½ í•  ìˆ˜ ì—†ìŒ
* Compliance Mode - root ìœ ì €ë„ overwrite, delete ë¶ˆê°€. Retention periodë™ì•ˆì€ ì–´ë–¤ ë³€ê²½ë„ ë¶ˆê°€í•¨.
* Retention Period - ì¼ì • ê¸°ê°„ë™ì•ˆ objectë¥¼ ë³´í˜¸í•¨. ì„¤ì •ë˜ë©´ object versionì˜ ë©”íƒ€ë°ì´í„°ì— í•´ë‹¹ ì •ë³´ê°€ ì¶”ê°€ë˜ê³ , retention periodê°€ ì§€ë‚œ í›„ì—ì•¼ ê°ì²´ì— ëŒ€í•œ ë³€ê²½ì´ ê°€ëŠ¥í•¨.
* Legal Holds - ê°ì²´ì˜ overwrite/delete ë°©ì§€. ì •í•´ì§„ ê¸°ê°„ì´ ì—†ìŒ. ë‹¨, **s3:PutObjectLegalHold** ê¶Œí•œì„ ê°€ì§„ ìœ ì €ëŠ” ììœ ë¡­ê²Œ ì„¤ì •/ì œê±° í•  ìˆ˜ ìˆìŒ



### Glacier Vault Lock

S3 Glacierì— ì ìš©.
**Glacier Vaultë³„ë¡œ** ì •ì±…ì„ ì ìš©í•¨.


## -4. S3 Performance

### prefix

bucketname/folder/subfolder/file > **/folder/subfolder**

* ì—¬ëŸ¬ Prefixë¡œ requestë¥¼ ë¶„ì‚°í•´ì•¼ ì„±ëŠ¥ì´ ë†’ì•„ì§ (prefix ë§ì„ìˆ˜ë¡ ì„±ëŠ¥ í–¥ìƒ)

* 100-200 ë°€ë¦¬ì„¸ì»¨ë“œì˜ latency, 3500 PUT/COPY/POST/DELETE, 5500 GET/HEAD request per second



### KMS

SSE-KMS ë¡œ ì•”í˜¸í™”í•˜ë©´ KMS limitì´ ìˆìŒ

* KMS ì‚¬ìš© ì‹œ  KMS quota ë„ ê³ ë ¤í•´ì•¼ í•¨. ë¦¬ì „ë³„ë¡œ ë‹¤ë¥´ì§€ë§Œ ë³´í†µ 5500, 10000, 30000 requests per seconds
* Quota increase ìš”ì²­ ë¶ˆê°€



### Multipart Uploads

í•˜ë‚˜ì˜ íŒŒì¼ì„ ì—¬ëŸ¬ê°œë¡œ ìª¼ê°œì„œ ë³‘ë ¬ ì—…ë¡œë“œ(efficiency ì¦ê°€)
100MB ì´ìƒì˜ íŒŒì¼ì— ê¶Œì¥, ìµœëŒ€ 5TBì˜ íŒŒì¼ê¹Œì§€ ê°€ëŠ¥.
ê° íŒŒíŠ¸ëŠ” 5MB~5GB



### S3 Byte Range Fetches

ë³‘ë ¬ ë‹¤ìš´ë¡œë“œ

ì†ë„ ì¦ê°€ & íŒŒì¼ ì¼ë¶€ë§Œ ì„ íƒì ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œ ê°€ëŠ¥



## -5. S3 Select & Glacier select

S3 Select - í° íŒŒì¼ì—ì„œ(ex. zipìœ¼ë¡œ í•©ì¶•ëœ csv) ê°„ë‹¨í•œ SQL expressionì„ í†µí•´ ë°ì´í„°ì˜ ì¼ë¶€ë§Œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŒ(íŠ¹ì • row, column ë“±) - ì „ì²´ë¥¼ ë‹¤ìš´ë¡œë“œí•´ì„œ, ì••ì¶•í•´ì œí•˜ê³ , csvì „ì²´ë¥¼ ì²˜ë¦¬í•  í•„ìš”ê°€ ì—†ìŒ

=> ìµœëŒ€ 400% ë¹ ë¦„, 80% ì €ë ´

í•˜ìœ„ ì¿¼ë¦¬, ì¡°ì¸ì€ ì§€ì›í•˜ì§€ ì•ŠìŒ

Glacier Select - Glacierì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¬ ë•Œ



## -6. AWS Organizations & Consolidated Billing

### AWS Organizations
ì—¬ëŸ¬ AWS ê³„ì •ì„ organizationìœ¼ë¡œ í†µí•©(consolidate)í•˜ì—¬ ì¤‘ì•™ ê´€ë¦¬í•˜ë„ë¡ í•´ì¤Œ

### Consolidated Billing

ë§ì´ ì“¸ìˆ˜ë¡ ëœ ëƒ„.. ì—¬ëŸ¬ account ë¥¼ í†µí•©í•˜ì—¬ billing (ìœ ë¦¬í•˜ë„ë¡?) - Volume pricing discount

<img src="/assets/[AWSSA]S3/image-20210113080618080.png" alt="image-20210113080618080" style="zoom:50%;" />

ì—¬ê¸°ì„œ ì¡°ì§ ìƒì„± -> Invite account -> ì´ë©”ì¼ë¡œ ê°€ì„œ ë§í¬ë¥¼ í´ë¦­í•˜ë©´ ì´ˆëŒ€ ì™„ë£Œ

![image-20210113080712595](/assets/[AWSSA]S3/image-20210113080712595.png)



ê³„ì •ì— organization ì¶”ê°€ëœ ê²ƒ í™•ì¸ ê°€ëŠ¥

![image-20210113080819387](/assets/[AWSSA]S3/image-20210113080819387.png)



Masterê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•´ì„œ AWS organizationë©”ë‰´ë¡œ ë“¤ì–´ê°€ë©´ joiní•œ ê³„ì •ë“¤ì„ í™•ì¸ ê°€ëŠ¥



### Best Practices with AWS Organizations

* root accountì—ëŠ” MFAë¥¼ ì¼œ ë†“ì„ ê²ƒ & ê°•ë ¥í•œ ì•”í˜¸ ì„¤ì •
* Paying accountëŠ” billingì„ ìœ„í•´ì„œë§Œ ì‚¬ìš©ë˜ì–´ì•¼ í•¨. ë¦¬ì†ŒìŠ¤ë¥¼ deployí•˜ê±°ë‚˜ í•˜ì§€ ë§ ê²ƒ
* SCP(Service Control Policies)ì‚¬ìš©í•˜ëŠ” ì„œë¹„ìŠ¤ì˜ enable/disableì€ OU(Organization Unit) ë˜ëŠ” ê°œë³„ accoutì—ì„œ í•  ê²ƒ(â“)





## -7. Lab - Sharing S3 Buckets Accross Accounts

S3 Bucketì„ ê³„ì •ê°„ì— ê³µìœ í•˜ëŠ” ì„¸ê°€ì§€ ë°©ë²• â­

1. **Bucket Policies & IAM (entire bucket) . Programmatic Access Only**
2. **Bucket ACL(Individual Access) & IAM. Programmatic Access Only**
3. **Cross-account IAM Roles. Programmatic Access & Console Access.**



(ê³„ì •1) IAM -> create role -> (Select type of trusted entities) another AWS Account -> (Role) S3 full access -> (tag) blank -> (Role name) S3_cross_account_Access -> 'Give this link to users ... ' ë¶€ë¶„ì„ ê³µìœ 

(ê³„ì •2) ë‹¤ë¥¸ AWS Account -> IAM -> Users
-> Add User (Root Account ë¡œëŠ” ë¶ˆê°€í•˜ë¯€ë¡œ) & set Console Password (=> ì´ê±¸ë¡œ ì½˜ì†”ì—ì„œ ë¡œê·¸ì¸ í•  ì˜ˆì •)
-> ê·¸ë£¹ ìƒì„± ë° ê·¸ë£¹ì— í•´ë‹¹ ìœ ì € ì¶”ê°€ (Group name)Admins, (Policy) AdministratorAccess
=> ìœ ì € ìƒì„± ì™„ë£Œ (sign-in addressê°€ í™”ë©´ì— ëœ¨ëŠ”ë° ì´ë¥¼ ì´ìš©í•´ ë¡œê·¸ì¸)
-> í•´ë‹¹ ë§í¬ë¡œ ë¡œê·¸ì¸ -> **"Switch Role" ë²„íŠ¼ í´ë¦­** -> ì•„ê¹Œ ê³„ì •1ì—ì„œ ë§Œë“¤ì–´ì§„ role ì •ë³´ ì…ë ¥ (â“) -> í•´ë‹¹ roleë¡œ ë¡œê·¸ì¸ í•œ ê²ƒ í™•ì¸ ê°€ëŠ¥

![image-20210113084834520](/assets/[AWSSA]S3/image-20210113084834520.png)

-> billingë“±ì€ ì•ˆë˜ê³ , s3ì— ëŒ€í•œ ì‘ë™ë§Œ ë‹¤ ê°€ëŠ¥





## -8. Cross Region Replication



Replication Rule -> Create a new rule -> (Source bucket) ì „ì²´ Or fileter -> (Destination) ì•„ê¹Œë§Œë“  ë²„í‚·. - **destination bucketì—ì„œëŠ” versioningì´ enableë˜ì–´ìˆì–´ì•¼ í•¨!** -> a

* ì†ŒìŠ¤ ë²„í‚·ì˜ ë²„ì „ ë°”ê¾¸ë©´ - ê°€ì¥ ìµœì‹  ë²„ì „ë§Œ replicateë¨

* permission ë³€ê²½í•´ë„ replicateì˜ permissionì€ ê·¸ëŒ€ë¡œ



Exam Tips

* sourceì™€ destination ëª¨ë‘ì—ì„œ versioningì„ ì¼œë‘ì–´ì•¼ í•¨

* ê¸°ì¡´ ë²„í‚·ì˜ íŒŒì¼ì€ ìë™ìœ¼ë¡œ ë³µì œë˜ì§€ ì•ŠìŒ

* ì´í›„ì˜ íŒŒì¼ ì—…ë°ì´íŠ¸ëŠ” ëª¨ë‘ ë³µì œ(replicate)ë¨

* delete markerëŠ” ë³µì œë˜ì§€ ì•ŠìŒ

* ê°œë³„ ë²„ì „ì´ë‚˜ delete markerë¥¼ ì‚­ì œí•˜ëŠ”ê²ƒì€ ë³µì œë˜ì§€ ì•ŠìŒ


â“ íŒŒì¼ì„ ì‚­ì œí–ˆë‹¤ê°€ ë³µêµ¬í•˜ëŠ”ê²½ìš° (= delete markerë¥¼ ì‚­ì œí•˜ëŠ”ê²½ìš°)ëŠ” ì–´ë–»ê²Œ ë˜ì§€?


## -9. Transfer Acceleration

distinct URLì„ í†µí•´ edge locationì— ì—…ë¡œë“œ í›„ ì „ì†¡í•˜ì—¬ ì—…ë¡œë“œ ì†ë„ë¥¼ ë†’ì¼ ìˆ˜ ìˆìŒ.
https://s3-accelerate-speedtest.s3-accelerate.amazonaws.com/en/accelerate-speed-comparsion.html?region=ë¦¬ì „origBucketName=ë²„í‚·ì´ë¦„
ìœ¼ë¡œ ì ‘ì†í•˜ë©´ ì†ë„ ë¹„êµí•´ë³¼ ìˆ˜ ìˆìŒ.
![](/assets/[AWSSA]S3/2021-01-15-aws_s3-d8672eac.png)

## -10. DataSync Overview

(ì‹œí—˜ì— ë‚˜ì˜¤ëŠ” ê²ƒë§Œ ê°„ë‹¨íˆ)

AWS DataSyncëŠ” ì˜¨í”„ë ˆë¯¸ìŠ¤ ìŠ¤í† ë¦¬ì§€ ì‹œìŠ¤í…œê³¼ AWS ìŠ¤í† ë¦¬ì§€ ì„œë¹„ìŠ¤ ê°„, ê·¸ë¦¬ê³  ì—¬ëŸ¬ AWS ìŠ¤í† ë¦¬ì§€ ì„œë¹„ìŠ¤ ê°„ì˜ ë°ì´í„° ì´ë™ì„ ê°„ì†Œí™”, ìë™í™” ë° ê°€ì†í™”í•˜ëŠ” **ì˜¨ë¼ì¸** ë°ì´í„° ì „ì†¡ ì„œë¹„ìŠ¤ **On-prem to AWS**

* **ëŒ€ìš©ëŸ‰ì˜ ë°ì´í„°ë¥¼ on-premiseì—ì„œ AWSë¡œ ì´ì „í•  ë•Œ ì‚¬ìš©**
* NFS-ë‚˜ SMB- í˜¸í™˜ ê°€ëŠ¥í•œ íŒŒì¼ì— ì‚¬ìš©
* hourly, daily, weekly replication ê°€ëŠ¥
* replicationì„ ì‹œì‘í•˜ë ¤ë©´ DataSync agentë¥¼ ì„¤ì¹˜í•´ì•¼ í•¨
* EFS to EFS ë¡œ ì´ì „í•  ë•Œì—ë„ ì‚¬ìš© ê°€ëŠ¥

![image-20210113134140541](/assets/[AWSSA]S3/image-20210113134140541.png)





## -11. CloudFront Overview

CDN - ìœ ì €ì—ê²Œ ì›¹í˜ì´ì§€ë‚˜ ì›¹ ì»¨í…ì¸ ë¥¼ ì „ë‹¬í•˜ëŠ” ë¶„ì‚° ì„œë²„ ì‹œìŠ¤í…œ.

ëŸ°ë˜ì— ì„œë²„ë¥¼ ë‘” ì›¹ì‚¬ì´íŠ¸ê°€ ìˆë‹¤ê³  í•˜ë©´, CDNì´ ì—†ë‹¤ë©´ ëª¨ë“  ë¦¬ì†ŒìŠ¤ëŠ” ëŸ°ë˜ê³¼ ì§ì ‘ ì—°ê²°í•´ì„œ ê°€ì ¸ì™€ì•¼ í•¨



**Key Terminnology** â­

* Edge Location - AWS Region/AZì™€ ë³„ê°œë¡œ ì»¨í…ì¸ ê°€ ìºì‹±ë˜ëŠ” Location
* Origin - S3 ë²„í‚·ì´ë‚˜ EC2 ì¸ìŠ¤í„´ìŠ¤ ë“± origin location
* Distribution - CDN (Edge locationì˜ ì§‘í•© )
  * Web Distribution - websites
  * RTMP - Media Streaming



CDNì— ìºì‹±ëœ ë¦¬ì†ŒìŠ¤ê°€ ìˆëŠ”ì§€ í™•ì¸í•œ í›„ ì„œë²„ì—ì„œ ê°€ì ¸ì˜´.

ì´í›„ì— ë‹¤ë¥¸ ìœ ì €ê°€ ê°™ì€ ë¦¬ì†ŒìŠ¤ë¥¼ ìš”ì²­í•˜ë©´ ë” ë¹¨ë¦¬ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŒ

![image-20210114192439016](/assets/[AWSSA]S3/image-20210114192439016.png)



* Edge locationì€ READ onlê°€ ì•„ë‹ˆë©°  writeë„ í•  ìˆ˜ ìˆìŒ!

* TTL(Time To Live ë§Œí¼ ë™ì•ˆ ìºì‹±ë¨)

* ìºì‹œëœ objectë¥¼ clearí•  ìˆ˜ ìˆì§€ë§Œ(**Invalidating cache**) ìš”ê¸ˆì„ ë‚´ì•¼ í•¨ â­



## CloudFront Lab

ì½˜ì†” ë©”ë‰´ > CloudFront > Create Distribution > Web Distribution

**(Origin Domain Name)** ë¦¬ì†ŒìŠ¤ ì„ íƒ (s3, ec2, elastic load balancer, route53 ...)

**(Origin Path)** ë¦¬ì†ŒìŠ¤ ë‚´ íŠ¹ì •  í´ë” ì„ íƒ

**(Restrict Bucket Access)** If you want to require that users always access your Amazon S3 content using CloudFront URLs, not Amazon S3 URLs, click Yes. This is useful when you are using signed URLs or signed cookies to restrict access to your content. In the Help, see "Serving Private Content through CloudFront".

**(TTL)** ì €ì¥í•  ì‹œê°„

**(Restrict Access Users)** ë¯¸ë””ì–´ íšŒì‚¬ì¸ ê²½ìš°, ê³¼ê¸ˆëœ ìœ ì €ë§Œ ë™ì˜ìƒì„ ë³¼ ìˆ˜ ìˆëŠ” ë“± ì ‘ê·¼ ì œí•œì´ ìƒê¹€. ì´ëŸ´ ë•Œ ì‚¬ìš© â­



ë§Œë“¤ì–´ì§„ ë¦¬ì†ŒìŠ¤ì— ì ‘ì†í•´ì„œ create invalidationìœ¼ë¡œ ë“¤ì–´ê°€ë©´

Invalidate í•˜ë©´ ë”ì´ìƒ edge locationì— ë„£ì§€ ì•Šê² ë‹¤ëŠ” ê²ƒ.

ex. ì—…ë°ì´íŠ¸ë¥¼ í–ˆëŠ”ë° ë³€ê²½ì‚¬í•­ì´ ì•ˆë³´ì¸ë‹¤ë©´ invalidateë¥¼ í•˜ëŠ”ê²Œ ë°©ë²•ì¼ìˆ˜ë„





## -12. CloudFront Signed URLs and Cookies

**S3 Signed url vs. CloudFront signed url** â“
* CloudFront - ê²½ë¡œì— ëŒ€í•œ ì ‘ê·¼ì„ í—ˆìš©í•˜ëŠ” ê²ƒ. Originì— ê´€ê³„ ì—†ì´ ìœ íš¨í•œ ì„œëª…ë§Œ ìˆë‹¤ë©´ ì ‘ê·¼í•  ìˆ˜ ìˆìŒ.

* S3 - ìƒì„±í•  ë•Œ ì‚¬ìš©ìì˜ security credentialì„ í™œìš©í•˜ë©° ì‹œê°„ ì œí•œì´ ìˆê³ , ì‚¬ìš©í•  HTTP methodë¥¼ ëª…ì‹œí•´ì•¼ í•¨


**CloudFront Signed URL vs. CloudFront Signed Cookies**

1. CloudFront Signed URL : 1file = 1 URL
2. Signed Cookies : 1cookie = multiple files

Signed URLì´ë‚˜ signed cookieë¥¼ ìƒì„±í•  ë•Œì—ëŠ” policyë¥¼ ë¶™ì„.

policy : URLë§Œë£Œì‹œê°„, IP range , Trusted signer (ëˆ„ê°€ Signed urlì„ ìƒì„±í•  ìˆ˜ ìˆëŠ”ì§€)



![image-20210114195658563](/assets/[AWSSA]S3/image-20210114195658563.png)

Signed URLì„ ìƒì„±í•˜ê¸° ìœ„í•´ CloudFrontì™€ ì‘ìš©





## -13. Snowball

petabyteë‹¨ìœ„ì˜ transport solution
ì—£ì§€ì»´í“¨íŒ…, ë°ì´í„° ì „ì†¡, ì—£ì§€ ìŠ¤í† ë¦¬ì§€ **ë””ë°”ì´ìŠ¤**

Snowball can Import to S3, Export from S3

**'AWS cloudë¡œ ëŒ€ìš©ëŸ‰ì˜ ë°ì´í„°ë¥¼ ì „ì†¡**í•˜ë ¤ í•œë‹¤' í•˜ëŠ” ì‹œë‚˜ë¦¬ì˜¤basedë¬¸ì œê°€ ë‚˜ì˜¨ë‹¤ ? =>  **Snowball**





## -14. Storage Gateway â“
í´ë¼ìš°ë“œ ìŠ¤í† ë¦¬ì§€ì— ëŒ€í•œ ì˜¨í”„ë ˆë¯¸ìŠ¤ ì•¡ì„¸ìŠ¤ ê¶Œí•œì„ ì œê³µí•˜ëŠ” í•˜ì´ë¸Œë¦¬ë“œ í´ë¼ìš°ë“œ ìŠ¤í† ë¦¬ì§€ ì„œë¹„ìŠ¤
* File Gateway (NFS &SMB)  : app ì„œë²„ì˜ ë°ì´í„°ë¥¼ AWSë¡œ ì˜¬ë¦¬ëŠ” ë°©ë²•.
  -> S3ì— ë°”ë¡œ ì €ì¥

  ![image-20210114202620152](/assets/[AWSSA]S3/image-20210114202620152.png)

* Volume Gateway(iSCSI)

  * stored volumes : ì „ì²´ storeê°€ S3ì— ì €ì¥ë¨
  * cached volumes :  ì „ì²´ storeê°€ S3ì— ì €ì¥ & ìì£¼ì“°ëŠ”ê±° ìºì‹±

*  Tape Gateway :



## -15. Athena vs. Machie

**Athena** -ë¶„ì„

* Interective query service. standard SQLì„ ì´ìš©í•´ì„œ S3ì— ì €ì¥ëœ ë°ì´í„°ë¥¼ ë¶„ì„
* ì„œë²„ë¦¬ìŠ¤
* S3ì— ì €ì¥ëœ ë¡œê·¸ ë°ì´í„° ë¶„ì„ì— ë§ì´ ì‚¬ìš©ë¨



**Machie** - ë³´ì•ˆ

* Security service. AIë¡œ PIIë¥¼ ì°¾ëŠ” ì„œë¹„ìŠ¤
* ì˜ì‹¬ìŠ¤ëŸ¬ìš´ APIì— ëŒ€í•œ ë¡œê·¸ ë¶„ì„ì—ë„ ì‚¬ìš©ë  ìˆ˜ ìˆìŒ
* ëŒ€ì‹œë³´ë“œ, ë¦¬í¬íŠ¸, ì•ŒëŒ ë“±ì„ í¬í•¨í•¨
* PCI-DSS complianceì™€ ID theftë¥¼ ë°©ì§€í•˜ëŠ”ë° ì ì ˆ
